
\chapter{External Tools} \label{ExtTools}

SixTrack supports interfacing with external libraries and simulation tools.
This chapter describes how to use these tools with SixTrack.

\section{Pythia Integration} \label{ExtPythia}

Pythia8 is ``a standard tool for the generation of high-energy collisions, comprising a coherent set of physics models for the evolution from a few-body hard process to a complex multihadronic final state''~\cite{pythia8}\index{Pythia}.
Version 8 is rewritten in c++ as a library, which makes it suitable for direct integration into SixTrack 5 via the update and extended c-interface available in Fortran2008.
The integration was made specifically for the Scatter module\index{scatter} to function as an event generator for single diffractive scattering.

The Pythia8 library is built using the \texttt{buildLibraries.sh} script, and linking with SixTrack is provided with the \texttt{PYTHIA} compiler flag\index{build}.
When the \texttt{PYTHIA} block is present in \texttt{fort.3}, a new generator becomes available to the Scatter module.

The module is under development, but an example input block is provided below together with a \texttt{SCATTER} block.

\begin{cverbatim}
PYTHIA------------------------------------------------------------------
  LOSSES
  SPECIES PROTON PROTON
  ENERGY 7000000 7000000
  SEED 41
  PROCESS ELASTIC
  PROCESS SINGLEDIFFRACTIVE
NEXT

SCATTER-----------------------------------------------------------------
  SEED 42
  GEN  sc_elastic  PPBEAMELASTIC 0.046  18.52  4.601  2.647  0.2  8.0
  GEN  sc_pythia   PYTHIASIMPLE  27.0
  PRO  ipFLAT      FLAT   3e25  938.0  7000000
  ELEM ip1_scatter ipFLAT auto 1.0 sc_elastic
  ELEM ip5_scatter ipFLAT auto 1.0 sc_pythia
NEXT
\end{cverbatim}

\section{Root Integration} \label{ExtRoot}
\index{ROOT}

\bigskip
\begin{tabular}{@{}lp{0.8\linewidth}}
    \textbf{Keyword}    & \texttt{ROOT}\index{ROOT} \\
    \textbf{Data lines} & Variable, see below. \\
    \textbf{Format}     & This module uses a keyword, value format. See below.
\end{tabular}

\paragraph{Select output to enable} \texttt{ENABLE type}\\

The \texttt{ENABLE} flag selects which output to enable for root.
Since a large run or parameter scan usually uses multiple copies of SixTrack, a lot of information is the same between each run, e.g. the accelerator layout.
It is suggested to only enable the full output on a single run, and reduced output on all others.


\bigskip
\begin{tabular}{@{}llp{0.7\linewidth}}
    \texttt{type} & char    & The type of output to enable.
\end{tabular}

\begin{tabular}{@{}lp{0.7\linewidth}}
    \texttt{ALL}    & Writes all possible output. \\
    \texttt{ACCEL}  & Writes a description of the accelerator layout \\
    \texttt{COLL}   & Writes the energy and nucleons lost on each collimator. \\
    \texttt{COLDB}  & Writes the contents of the collimation database. \\
    \texttt{APER}   & Writes particles lost on the aperture. \\
    \texttt{OPTICS} & Writes the linear optics of the machine. \\
    \texttt{FLUKA}  & Writes additional information on insertion lengths required for usage with the FLUKA coupling. \\
    \texttt{PIPE}   & Writes a description of the physical beam pipe from the aperture module.
\end{tabular}


\bigskip
\paragraph{Enable writing directly to eos} \texttt{EOS}\\

The \texttt{EOS} flag enables writing directly to the CERN eos filesystem directly via xrootd instead of as normal files.

\bigskip
\paragraph{Selection of the output file path} \texttt{PATH loc}\\

The \texttt{PATH} flag selects the path (folder) of where the output files should be written to. 

\bigskip
\begin{tabular}{@{}llp{0.7\linewidth}}
    \texttt{loc} & char    & The folder where output should be written to.
\end{tabular}

\bigskip
\paragraph{Selection of the output file name} \texttt{PREFIX pre}\\

The \texttt{PREFIX} flag selects the first part of the output filename.
Added to this is the run number (defined below).
This is then followed by the file extension ".root".

\bigskip
\begin{tabular}{@{}llp{0.7\linewidth}}
    \texttt{pre} & char    & The first part of the output file name.
\end{tabular}

\bigskip
\paragraph{Selection of the output run number} \texttt{RUN number}\\

The \texttt{RUN} flag selects the run number to be added to the root output file name. 
This is usually the random number seed.

\bigskip
\begin{tabular}{@{}llp{0.7\linewidth}}
    \texttt{number} & integer    & The output run number.
\end{tabular}

